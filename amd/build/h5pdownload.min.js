define ("filter_h5pdownload/h5pdownload",["jquery","core/url","core/str"],function(a,b,c){var d="",e="",f="",g="",h="Download",i="Copy",j="Close",k="",l="",m="",n="",o="";return{init:function init(b){var p=this;c.get_string("content_reuse","filter_h5pdownload").done(function(a){return f="<h4>"+a+"</h4>"});c.get_string("licence_to_use","filter_h5pdownload").done(function(a){return g=a});c.get_string("download","core").done(function(a){return h=a});c.get_string("copy","core").done(function(a){return i=a});c.get_string("close","core").done(function(a){return j=a});d=b.backgroundColor;e=b.textColor;k=b.licenceIntro;l=b.licenceName;m=b.licenceShortname;n=b.licenceUrl;o=b.reuseConditions;$h5ps=a(".h5p-placeholder, .h5p-iframe-wrapper");$h5ps.each(function(b){p.hoverElement(a($h5ps[b]))})},hoverElement:function hoverElement(b){var c=this;b.on("mouseenter",function(){var d=b.find(".h5p-iframe").attr("src"),e=d.split("embed.php?url=")[1].split(".h5p")[0];if(0<e.length){var f=decodeURIComponent(e)+".h5p";$openOverlay=a("<button class=\"h5p-download\">").append(c.addImage("download",h,"icon"));$openOverlay.on("click",function(){c.createOverlay(f)});if(!b.find(".h5p-download").length){b.append($openOverlay)}b.find(".h5p-download").fadeIn()}});b.on("mouseleave",function(){b.find(".h5p-download").fadeOut()})},createOverlay:function createOverlay(b){$closeOverlay=a("<div class=\"close-modal\"></div>").html(this.addImage("times",j,"icon"));$closeOverlay.on("click",function(){a("body").find(".download-overlay").remove()});var c=a("<div/>");c.attr("class","mt-2");var p=a("<a/>");p.attr("href",n);p.attr("target","_blank");p.append(this.addImage("cc/cc","CC image","modal-icon"));p.append(this.addImage("cc/by","BY image","modal-icon"));p.append(this.addImage("cc/nc","NC image","modal-icon"));c.append(p);$copy=a("<button class=\"btn\"></button>").on("click",function(){navigator.clipboard.writeText(m)}).prepend(this.addImage("copy",i,"icon"));var q=a("<p>",{html:k+" <a href=\""+n+"\" target=\"_blank\">"+l+"</a>."}).append(c),r=a("<div>",{class:"licence",style:"background-color:"+d+";color:"+e,html:"<span>"+g+" : "+m+"</span>"}).append($copy),s=a("<p>",{html:"<p>"+o+"</p>"}).append(r),t=a("<a>",{text:h,title:h,class:"btn btn-secondary",href:b}).prepend(this.addImage("download",h,"icon"));$content=a("<div/>");$content.attr("class","content");$column1=a("<div/>");$column1.attr("class","column");$column1.html(q).append(s);$column2=a("<div/>");$column2.attr("class","column");$column2.html(t);$content.append($column1);$content.append($column2);$modal=a("<div class=\"download-modal\">").html(f).append($content).append($closeOverlay);$overlay=a("<div class=\"download-overlay\">").append($modal);a("body").append($overlay)},addImage:function addImage(c,d,e){var f=a("<img/>");f.attr("alt",d);f.attr("title",d);f.attr("class",e);f.attr("src",b.imageUrl(c,"filter_h5pdownload"));return f}}});
//# sourceMappingURL=h5pdownload.min.js.map
